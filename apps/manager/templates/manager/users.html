{% extends 'manager/base.html' %}

{% block manager_content %}
<div class="manager-header">
  <h1>üë• –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</h1>
  <div>
    <form method="get" style="display: flex; gap: 10px;">
      <input type="text" name="search" value="{{ search_query }}" 
             placeholder="–ü–æ—à—É–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤..." 
             style="padding: 10px 15px; border: 1px solid #ddd; border-radius: 6px; width: 300px;">
      <button type="submit" 
              style="padding: 10px 20px; background: var(--color-primary); color: white; border: none; border-radius: 6px; cursor: pointer;">
        üîç –®—É–∫–∞—Ç–∏
      </button>
      {% if search_query %}
      <a href="{% url 'manager:users' %}" 
         style="padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 6px; display: inline-block;">
        –°–∫–∏–Ω—É—Ç–∏
      </a>
      {% endif %}
    </form>
  </div>
</div>

<div style="overflow-x: auto;">
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="background: #f8f9fa;">
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">ID</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">–ü–Ü–ë</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">Email</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">–¢–µ–ª–µ—Ñ–æ–Ω</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #dee2e6;">–°—Ç–∞—Ç—É—Å</th>
      </tr>
    </thead>
    <tbody>
      {% for user in page_obj %}
      <tr style="border-bottom: 1px solid #dee2e6;">
        <td style="padding: 12px;">{{ user.id }}</td>
        <td style="padding: 12px; font-weight: 600;">{{ user.username }}</td>
        <td style="padding: 12px;">{{ user.get_full_name|default:"‚Äî" }}</td>
        <td style="padding: 12px;">{{ user.email }}</td>
        <td style="padding: 12px;">{{ user.phone_number|default:"‚Äî" }}</td>
        <td style="padding: 12px;">{{ user.date_joined|date:"d.m.Y H:i" }}</td>
        <td style="padding: 12px;">
          {% if user.is_active %}
            <span style="color: #28a745; font-weight: 600;">‚úì –ê–∫—Ç–∏–≤–Ω–∏–π</span>
          {% else %}
            <span style="color: #dc3545; font-weight: 600;">‚úó –ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7" style="padding: 30px; text-align: center; color: #6c757d;">
          –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% if page_obj.has_other_pages %}
<div style="margin-top: 30px; display: flex; justify-content: center; gap: 10px;">
  {% if page_obj.has_previous %}
    <a href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}" 
       style="padding: 8px 12px; background: #f8f9fa; color: #333; text-decoration: none; border-radius: 4px;">–ü–µ—Ä—à–∞</a>
    <a href="?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" 
       style="padding: 8px 12px; background: #f8f9fa; color: #333; text-decoration: none; border-radius: 4px;">‚Üê –ù–∞–∑–∞–¥</a>
  {% endif %}
  
  <span style="padding: 8px 12px; background: var(--color-primary); color: white; border-radius: 4px;">
    –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ page_obj.number }} –∑ {{ page_obj.paginator.num_pages }}
  </span>
  
  {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" 
       style="padding: 8px 12px; background: #f8f9fa; color: #333; text-decoration: none; border-radius: 4px;">–í–ø–µ—Ä–µ–¥ ‚Üí</a>
    <a href="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}" 
       style="padding: 8px 12px; background: #f8f9fa; color: #333; text-decoration: none; border-radius: 4px;">–û—Å—Ç–∞–Ω–Ω—è</a>
  {% endif %}
</div>
{% endif %}
{% endblock %}
