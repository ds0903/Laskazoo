{# templates/zoosvit/products/subcategory_list.html - ОПТИМІЗОВАНА ВЕРСІЯ #}
{% extends 'zoosvit/core/base.html' %}
{% load static %}

{% block title %}{{ main.name }} – Ласка{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" href="{% static 'zoosvit/css/catalog.css' %}">
  <link rel="stylesheet" href="{% static 'zoosvit/css/styles.css' %}">
  <script defer src="{% static 'zoosvit/js/product_cards.js' %}"></script>
{% endblock %}

{% block breadcrumbs %}
<nav class="breadcrumbs" aria-label="Breadcrumb">
  <a href="{% url 'home' %}">Головна</a>
  <span class="separator">›</span>
  <a href="{% url 'products:catalog' %}">Каталог</a>
  <span class="separator">›</span>
  <span class="current">{{ main.name }}</span>
</nav>
{% endblock %}

{% block content %}
<h1 class="catalog-page-heading">{{ main.name }}</h1>

<section class="catalog container">
  <div class="catalog-wrapper">
    <main class="catalog-main">
      <div class="subcategory-grid">
        {% for sub in categories %}
          <a href="{% url 'products:category_products' main.slug sub.slug %}"
             class="subcategory-card">
            {% if sub.image %}
              <img src="{{ sub.image.url }}" alt="{{ sub.name }}" loading="lazy" width="80" height="80">
            {% else %}
              <img src="{% static 'zoosvit/img/placeholder.png' %}"
                   alt="no image" loading="lazy" width="80" height="80">
            {% endif %}
            <span class="subcategory-name">{{ sub.name }}</span>
          </a>
        {% empty %}
          <p>На жаль, підкатегорій не знайдено.</p>
        {% endfor %}
      </div>
    </main>
  </div>
</section>

<script>
// Навіть якщо тут немає карток товарів, підключаємо для консистентності
document.addEventListener('DOMContentLoaded', function() {
  console.log('[SUBCATEGORY] Page loaded, ready for navigation to product pages');
});
</script>
{% endblock %}